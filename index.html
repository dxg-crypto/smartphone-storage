<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スマホ診断ツール：ストレージ＆データ通信量</title>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX compilation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=Noto+Sans+JP:wght@400;500;700;900&display=swap');
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #ffffff;
            border: 2px solid currentColor;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- Inline SVG Icons ---
        const IconCamera = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>
        );
        const IconVideo = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2" ry="2"/></svg>
        );
        const IconGamepad = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="6" x2="10" y1="12" y2="12"/><line x1="8" x2="8" y1="10" y2="14"/><line x1="15" x2="15.01" y1="13" y2="13"/><line x1="18" x2="18.01" y1="11" y2="11"/><rect width="20" height="12" x="2" y="6" rx="2"/></svg>
        );
        const IconHardDrive = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="8" x="2" y="3" rx="2"/><rect width="20" height="8" x="2" y="13" rx="2"/><line x1="6" x2="6" y1="7" y2="7"/><line x1="6" x2="6" y1="17" y2="17"/></svg>
        );
        const IconData = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 20h.01"/><path d="M7 20v-4"/><path d="M12 20v-8"/><path d="M17 20V8"/><path d="M22 20V4"/></svg>
        );
        const IconInfo = ({ size = 14, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        );
        const IconCheckCircle = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        );
        const IconAlertCircle = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
        );
        const IconWifi = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 13a10 10 0 0 1 14 0"/><path d="M8.5 16.5a5 5 0 0 1 7 0"/><path d="M2 8.82a15 15 0 0 1 20 0"/><line x1="12" x2="12.01" y1="20" y2="20"/></svg>
        );

        const App = () => {
            const [activeTab, setActiveTab] = useState('storage'); // 'storage' or 'data'
            
            // --- Storage State ---
            const [photosPerMonth, setPhotosPerMonth] = useState(100);
            const [videoSdMinutes, setVideoSdMinutes] = useState(10);
            const [video4kMinutes, setVideo4kMinutes] = useState(5);
            const [appLevel, setAppLevel] = useState('standard');

            // --- Data Communication State ---
            const [dataVideoHours, setDataVideoHours] = useState(1); // 日間の動画視聴
            const [dataSnsHours, setDataSnsHours] = useState(1);   // 日間のSNS
            const [dataWifiRate, setDataWifiRate] = useState(50); // Wi-Fi利用率 (%)

            // 定数 (Storage)
            const PHOTO_SIZE = 5;
            const VIDEO_SD_SIZE = 150;
            const VIDEO_4K_SIZE = 400;
            const SYSTEM_SIZE = 30 * 1024;
            const APP_SIZES = { low: 10 * 1024, standard: 30 * 1024, high: 100 * 1024 };

            // 定数 (Data Communication - GB/hour approx)
            const DATA_VIDEO_GB_H = 0.7; // 標準画質ストリーミング
            const DATA_SNS_GB_H = 0.3;   // SNS/WEB
            const DATA_GAME_GB_H = 0.1;  // オンラインゲーム

            // Storage Calculation
            const storageCalculations = useMemo(() => {
                const monthlyUsageMB = 
                    (photosPerMonth * PHOTO_SIZE) + 
                    (videoSdMinutes * VIDEO_SD_SIZE) + 
                    (video4kMinutes * VIDEO_4K_SIZE);

                const year2TotalGB = (SYSTEM_SIZE + APP_SIZES[appLevel] + (monthlyUsageMB * 24)) / 1024;

                let recommendation = "128GB";
                let color = "text-emerald-600";
                let advice = "標準的な128GBでも十分余裕を持ってご利用いただけます。";

                if (year2TotalGB > 450) {
                    recommendation = "1TB";
                    color = "text-purple-600";
                    advice = "非常に多くのデータを保存されます。1TBなら最高画質の動画も安心です。";
                } else if (year2TotalGB > 220) {
                    recommendation = "512GB";
                    color = "text-blue-600";
                    advice = "動画撮影やゲームを頻繁にされる方に最適です。512GBなら先々まで安心です。";
                } else if (year2TotalGB > 100) {
                    recommendation = "256GB";
                    color = "text-indigo-600";
                    advice = "将来的に写真や動画が増えることを考えると、256GBが最もコスパが良い選択です。";
                }

                return {
                    total: Math.round(year2TotalGB),
                    recommendation,
                    color,
                    advice
                };
            }, [photosPerMonth, videoSdMinutes, video4kMinutes, appLevel]);

            // Data Plan Calculation
            const dataCalculations = useMemo(() => {
                const dailyGb = (dataVideoHours * DATA_VIDEO_GB_H) + (dataSnsHours * DATA_SNS_GB_H);
                const monthlyFullGb = dailyGb * 30;
                const monthlyMobileGb = monthlyFullGb * (1 - dataWifiRate / 100);

                let plan = "小容量プラン (3GB以下)";
                let color = "text-emerald-600";
                let advice = "Wi-Fiを上手く活用されており、月額を抑えた小容量プランがおすすめです。";

                if (monthlyMobileGb > 25) {
                    plan = "使い放題プラン";
                    color = "text-red-600";
                    advice = "モバイルデータ通信量が多いです。制限を気にせず使える無制限プランをお勧めします。";
                } else if (monthlyMobileGb > 7) {
                    plan = "中容量プラン (20GB〜30GB)";
                    color = "text-blue-600";
                    advice = "標準的な利用量です。20GB程度の定額プランが最もバランスが良いでしょう。";
                }

                return {
                    usage: monthlyMobileGb.toFixed(1),
                    plan,
                    color,
                    advice
                };
            }, [dataVideoHours, dataSnsHours, dataWifiRate]);

            return (
                <div className="min-h-screen text-slate-900 p-4 md:p-8">
                    <div className="max-w-2xl mx-auto">
                        <header className="text-center mb-6">
                            <h1 className="text-2xl md:text-3xl font-bold text-slate-800 mb-2 flex items-center justify-center gap-2">
                                <IconHardDrive className="text-blue-500" />
                                スマホ買い替え診断
                            </h1>
                            <p className="text-slate-500 text-sm italic">端末容量とデータプランを同時にチェック</p>
                        </header>

                        {/* タブ切り替え */}
                        <div className="flex bg-slate-200 p-1 rounded-2xl mb-6">
                            <button 
                                onClick={() => setActiveTab('storage')}
                                className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-bold transition-all ${activeTab === 'storage' ? 'bg-white shadow-sm text-blue-600' : 'text-slate-500'}`}
                            >
                                <IconHardDrive size={18} /> 端末容量
                            </button>
                            <button 
                                onClick={() => setActiveTab('data')}
                                className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-bold transition-all ${activeTab === 'data' ? 'bg-white shadow-sm text-blue-600' : 'text-slate-500'}`}
                            >
                                <IconData size={18} /> データ通信
                            </button>
                        </div>

                        <div className="space-y-6">
                            {/* --- STORAGE TAB --- */}
                            {activeTab === 'storage' && (
                                <>
                                    <section className="bg-white rounded-3xl shadow-sm border border-slate-100 p-6 space-y-8">
                                        {/* 写真 */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-3">
                                                    <div className="p-2 bg-orange-100 rounded-lg text-orange-600"><IconCamera /></div>
                                                    <label className="font-bold text-slate-700">写真の撮影 (月間)</label>
                                                </div>
                                                <span className="text-xl font-mono font-bold text-orange-600">{photosPerMonth}<small className="text-xs ml-1">枚</small></span>
                                            </div>
                                            <input type="range" min="0" max="1000" step="10" value={photosPerMonth} onChange={(e) => setPhotosPerMonth(parseInt(e.target.value))} className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer text-orange-500" />
                                        </div>

                                        {/* 動画 */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-3">
                                                    <div className="p-2 bg-blue-100 rounded-lg text-blue-600"><IconVideo /></div>
                                                    <label className="font-bold text-slate-700">通常動画の撮影 (月間)</label>
                                                </div>
                                                <span className="text-xl font-mono font-bold text-blue-600">{videoSdMinutes}<small className="text-xs ml-1">分</small></span>
                                            </div>
                                            <input type="range" min="0" max="120" step="5" value={videoSdMinutes} onChange={(e) => setVideoSdMinutes(parseInt(e.target.value))} className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer text-blue-500" />
                                        </div>

                                        {/* 高画質動画 */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-3">
                                                    <div className="p-2 bg-red-100 rounded-lg text-red-600"><IconVideo /></div>
                                                    <label className="font-bold text-slate-700">高画質/4Kの撮影 (月間)</label>
                                                </div>
                                                <span className="text-xl font-mono font-bold text-red-600">{video4kMinutes}<small className="text-xs ml-1">分</small></span>
                                            </div>
                                            <input type="range" min="0" max="60" step="1" value={video4kMinutes} onChange={(e) => setVideo4kMinutes(parseInt(e.target.value))} className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer text-red-500" />
                                        </div>

                                        {/* ゲーム */}
                                        <div className="space-y-4">
                                            <div className="flex items-center gap-3"><div className="p-2 bg-purple-100 rounded-lg text-purple-600"><IconGamepad /></div><label className="font-bold text-slate-700">アプリ・ゲーム利用量</label></div>
                                            <div className="grid grid-cols-3 gap-3">
                                                {['low', 'standard', 'high'].map((id) => (
                                                    <button key={id} onClick={() => setAppLevel(id)} className={`py-3 rounded-2xl border-2 text-xs font-bold transition-all ${appLevel === id ? 'border-purple-500 bg-purple-50 text-purple-700' : 'border-slate-100 text-slate-400'}`}>
                                                        {id === 'low' ? '少ない' : id === 'standard' ? '標準' : '多い'}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    </section>

                                    {/* Storage Result */}
                                    <div className="bg-white rounded-3xl shadow-xl border border-slate-100 p-8 text-center space-y-6">
                                        <div className="space-y-1">
                                            <p className="text-slate-400 text-xs font-bold tracking-widest uppercase">2-Year Storage Forecast</p>
                                            <p className="text-5xl font-black text-slate-800">{storageCalculations.total}<small className="text-xl ml-1">GB</small></p>
                                        </div>
                                        <div className="p-6 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200">
                                            <p className="text-slate-500 text-sm mb-1">推奨ストレージ容量</p>
                                            <p className={`text-5xl font-black mb-4 ${storageCalculations.color}`}>{storageCalculations.recommendation}</p>
                                            <div className="flex items-start gap-3 text-left p-3 bg-white rounded-xl shadow-sm border border-slate-100">
                                                <IconCheckCircle className={`shrink-0 mt-0.5 ${storageCalculations.color}`} />
                                                <p className="text-sm text-slate-600 italic leading-relaxed">{storageCalculations.advice}</p>
                                            </div>
                                        </div>
                                    </div>
                                </>
                            )}

                            {/* --- DATA TAB --- */}
                            {activeTab === 'data' && (
                                <>
                                    <section className="bg-white rounded-3xl shadow-sm border border-slate-100 p-6 space-y-8">
                                        {/* 動画視聴 */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-3">
                                                    <div className="p-2 bg-indigo-100 rounded-lg text-indigo-600"><IconVideo /></div>
                                                    <label className="font-bold text-slate-700">動画視聴 (1日の合計)</label>
                                                </div>
                                                <span className="text-xl font-mono font-bold text-indigo-600">{dataVideoHours}<small className="text-xs ml-1">時間</small></span>
                                            </div>
                                            <input type="range" min="0" max="10" step="0.5" value={dataVideoHours} onChange={(e) => setDataVideoHours(parseFloat(e.target.value))} className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer text-indigo-500" />
                                        </div>

                                        {/* SNS */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-3">
                                                    <div className="p-2 bg-sky-100 rounded-lg text-sky-600"><IconData /></div>
                                                    <label className="font-bold text-slate-700">SNS・Web利用 (1日)</label>
                                                </div>
                                                <span className="text-xl font-mono font-bold text-sky-600">{dataSnsHours}<small className="text-xs ml-1">時間</small></span>
                                            </div>
                                            <input type="range" min="0" max="10" step="0.5" value={dataSnsHours} onChange={(e) => setDataSnsHours(parseFloat(e.target.value))} className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer text-sky-500" />
                                        </div>

                                        {/* Wi-Fi率 */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-3">
                                                    <div className="p-2 bg-emerald-100 rounded-lg text-emerald-600"><IconWifi /></div>
                                                    <label className="font-bold text-slate-700">Wi-Fiの利用頻度</label>
                                                </div>
                                                <span className="text-xl font-mono font-bold text-emerald-600">{dataWifiRate}<small className="text-xs ml-1">%</small></span>
                                            </div>
                                            <input type="range" min="0" max="100" step="5" value={dataWifiRate} onChange={(e) => setDataWifiRate(parseInt(e.target.value))} className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer text-emerald-500" />
                                            <div className="flex justify-between text-[10px] text-slate-400 uppercase font-bold px-1">
                                                <span>ほぼ外(4G/5G)</span>
                                                <span>半々</span>
                                                <span>ほぼWi-Fi</span>
                                            </div>
                                        </div>
                                    </section>

                                    {/* Data Result */}
                                    <div className="bg-white rounded-3xl shadow-xl border border-slate-100 p-8 text-center space-y-6">
                                        <div className="space-y-1">
                                            <p className="text-slate-400 text-xs font-bold tracking-widest uppercase">Estimated Data Usage (Monthly)</p>
                                            <p className="text-5xl font-black text-slate-800">{dataCalculations.usage}<small className="text-xl ml-1">GB</small></p>
                                        </div>
                                        <div className="p-6 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200">
                                            <p className="text-slate-500 text-sm mb-1">おすすめのプラン目安</p>
                                            <p className={`text-2xl font-black mb-4 ${dataCalculations.color}`}>{dataCalculations.plan}</p>
                                            <div className="flex items-start gap-3 text-left p-3 bg-white rounded-xl shadow-sm border border-slate-100">
                                                <IconCheckCircle className={`shrink-0 mt-0.5 ${dataCalculations.color}`} />
                                                <p className="text-sm text-slate-600 italic leading-relaxed">{dataCalculations.advice}</p>
                                            </div>
                                        </div>
                                    </div>
                                </>
                            )}

                            {/* 接客ポイント */}
                            <div className="bg-amber-50 rounded-2xl p-4 border border-amber-100 flex gap-3">
                                <IconAlertCircle className="text-amber-500 shrink-0" />
                                <div>
                                    <p className="text-amber-800 text-xs font-bold mb-1">接客のヒント</p>
                                    <p className="text-amber-700 text-[11px] leading-relaxed">
                                        {activeTab === 'storage' 
                                            ? "「OSの更新でも容量は増えるので、迷ったら一歩上の容量が安心です」とお伝えください。"
                                            : "「高画質設定で視聴すると倍以上のギガを消費します。余裕のあるプランがおすすめです」とお伝えください。"}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <footer className="mt-8 text-center text-slate-400 text-[10px] pb-8 uppercase tracking-widest">
                            &copy; 2024 Storage & Data Plan Diagnosis Tool
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
